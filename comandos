# https://www.techtudo.com.br/noticias/2016/09/como-executar-dois-ou-mais-comandos-do-linux-ao-mesmo-tempo.ghtml

sudo rm -rf [nome-da-pasta]

git clone https://github.com/LeonardoSousa89/DIST-project_devOps-test.git

cd DIST-project_devOps-test

sudo rm -rf 'app @v1.0.64' 
ls 

cd app '@v1.0.65'

cd 'Eureka-server'
cd 'Api-gateway'

combo:  cd devOpsDist  && git clone https://github.com/LeonardoSousa89/DIST-project_devOps-test.git  
    cd DIST-project_devOps-test
    sudo rm -rf 'app @v1.0.64' &&
    cd 'app @v1.0.65' &&
    cd Eureka-server 
    sudo docker build -t leozin89/dist-eureka-server:v1 . && 
    sudo docker login -u leozin89 &&
    sudo docker push leozin89/dist-eureka-server:v1 &&
    sudo docker service create --name eureka-server --replicas 3 -p 8761:8761 leozin89/dist-eureka-server:v1 && docker service ls  
   
# usado no nivel do eureka sever
combo:  
    cd .. &&
    cd Api-gateway 
    sudo docker build -t leozin89/dist-api-gateway:v1 . &&
    sudo docker login -u leozin89 &&
    sudo docker push leozin89/dist-api-gateway:v1 &&
    sudo docker run -p 8761:8761 --name api-gateway --network distnetwork leozin89/dist-api-gateway:v1 
   
#  usado no nivel do eureka-server
cd ../../../../

# a partir do nivel do eureka-server
cd ../../../  && sudo rm -rf DIST-project_devOps-test && cd .. && clear

sudo docker swarm init

sudo docker ps -a

sudo docker service create --name eureka-server --replicas 3 -p 8761:8761 leozin89/dist-api-gateway:v1	

sudo docker service create --name api-gateway --replicas 3 -p 8765:8765 leozin89/dist-api-gateway:v1	

sudo docker sevice ls
sudo docker sevice rm [nome-do-servico]

sudo docker node ls
